[[main|На главную]]
Архитиктура Брендов и поставщиков одинакова. Единственное различие это fetch запросы

изначально на форме присутствуют
3 кнопку :
добавить бренд (type="submit" id="add" value="добавить бренд" data-toggle-id="form" data-action="add")
поиск бренда (type="submit" id="search" value="поиск бренда" data-toggle-id="form" data-action="search")
обновление страницы (type="submit" id="refresh" value="Все бренды" onclick="allBrends()")

    форма (id="form" hidden data-action="all") и в ней два input
        (type="text" id="inputForm" name="title" placeholder="")
        (type="submit" value="send")

    элемент ul (id="list" style="display: block;")

(48 стр) lastActionButtun - переменная которая хранит какая кнопка была нажата последняя поиск или добавление
(49 стр) elemForm переменная каторая ищет форму с id form
(50 стр) elemList переменная каторая ищет элемент ul с id list
(51 стр) elemInput переменная каторая ищет первый input с id inputForm

(54 стр) функция ActionButtun() ловит значение свойства data.action кнопок добавить и поиск

1.  если нажата кнопка добавить проверяет что было до этого в переменной lastActionButtun
    если в ней значение add то скрывает input
    если не add то открывает input поиска и меняет значение lastActionButtun на add
2.  если нажата кнопка поиск проверяет что было до этого в переменной lastActionButtun
    если в ней значение add то скрывает input
    если не add то открывает input добавить и меняет значение lastActionButtun на search

(79 стр) функция allBrends() отправляет запрос на /api/brands и если ОК

1. получает в ответ все бренды из базы.
2. отчищает елемент ul с id list
3. используя map отправляет все полученные элементы в функцию listOutputBrand(brand)
   если не ОК отрисовывает ошибку

(95 стр) функция listOutputBrand(brand) получает brand

    1.  создает основной div
    2.  создает две кнопки:
        1.1 buttonDel кнопка удаления
        2.1 buttonChenge кнопка изменения

    и помещает в них по картинке из папки img

    3. к кнопке buttonDel прикрепляет событие по клику  удаление строчки
        3.1 спрашивает у пользоватяле точно он хочет удалить?
        3.2 есди true отправляет fetch /api/brands/${brand.id}
        3.2.1 Если ответ ок то вызывает функцию allBrends()
        3.2.2 Если не ок то отрисовывает ошибку

    4. к кнопке buttonChenge прикрепляет событие по клику поиск строчки
        4.1 делает кнопку неактивной
        4.2 берет значение из тега li
        4.3 создает поле ввода и помещает туда текст который был в li. создает две кнопки ок и отмена. у li делает поле текста пустым
            4.3.1 при нажатии кнопки ок
                4.3.1.1  проверяет изменил ли что нибудь пользователь
                если нет то делает активной кнопку изменить, вставляет обратно текст в li  и удаляет поля ввода и удаляет кнопки ок и отмена
                если изменения есть то создает настройки для PATCH запроса с текстом измененного бренда и отправляет ftnch запрос на `/api/brands/${brand.id}`.
                4.3.1.2 если ответ ок то делает кнопку изменить активной и вызывает функцию allBrends()
                4.3.1.3 Если не ок то отрисовывает ошибку
            4.3.2 при нажатии кнопки отмена
                4.3.2.1 делает кнопку изменить активной. возвращает текст в li. удаляет поле ввода и кнопки ок и отмена

(196 стр) проверяет если у формы action = all (кнопки поиск и добавление не нажимались) вызывает функцию allBrends()

(201 стр) создает событие по клику кнопки send
отменяет обычное действие кнопки

    1. если форма открылась при нажатии кнопки добавить (action формы равен add)
        1.1 создает настройки для POST запроса с текстом который ввел пользователь и отправляет ftnch запрос на /api/brands
            1.1.1 если ок то отчищает тег ul, отчищает поля ввода от текста и вызывает функцию allBrends()
            1.1.2 Если не ок то отрисовывает ошибку
    2. Если форма открылась при нажатии кнопки поиск (action формы равен search)
        2.1 отчищает тег ul, присваивает переменной valueInputSearch текст из поля ввода, и создает пустой массив
        2.2 отправляет fetch запрос на /api/brands
            2.2.1 если ок то перебирает полученный результат и ищет совпадения с valueInputSearch. все совпадающие результаты записывает в массив. переберает полученный массив и отправляет в функцию listOutputBrand(), отчищает поле ввода.
            2.2.2 если не ок то отрисовывает ошибку

(254 стр) создает событие по клику кнопок найти и добавить

    1. проверяет что у кнопки по которой кликнули есть значение свойства toggleId. если есть то
        1.1 проверяет у элемента какое значение свойства action.\
            1.1.1 если add то прописывает placeholder = "Добавить бренд" и отправляет в функцию ActionButtun("add")
            1.1.2 если search то прописывает placeholder = "Поиск бренда" и отправляет в функцию ActionButtun("search")
    2. если значения или свойства нет то игнорирует клик

[[main|На главную]]
